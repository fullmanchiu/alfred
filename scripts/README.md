# 测试脚本

本目录包含项目的各种测试脚本。

## 可用脚本

### test_categories.sh
系统分类同步综合测试脚本。

**功能**：
- 自动重启后端
- 测试登录功能
- 验证分类数量和结构
- 测试分类名称、图标、子分类等更新
- 验证配置文件自动同步

**使用方法**：
```bash
./scripts/test_categories.sh
```

**测试内容**：
1. 登录验证
2. 分类数量统计（总分类、主分类、子分类）
3. 所有主分类列表
4. 参考分类详情（餐饮）
5. 问题分类验证（工资）
6. 收入分类及 configId
7. 配置文件更新验证（当前 v1.0.4）

### test_transactions.sh
交易管理API综合测试脚本。

**功能**：
- 测试交易CRUD操作（创建、读取、更新、删除）
- 测试交易与分类的关联
- 测试交易与账户的关联
- 测试交易筛选功能（按类型、分类、金额）
- 测试交易统计API

**使用方法**：
```bash
./scripts/test_transactions.sh
```

**测试内容**：
1. 登录验证
2. 创建测试账户和分类
3. 创建支出交易（expense）
4. 创建收入交易（income）
5. 获取所有交易
6. 按类型筛选交易
7. 按分类筛选交易
8. 获取单个交易详情
9. 更新交易金额和备注
10. 按金额范围筛选
11. 删除交易
12. 验证删除（返回404）
13. 清理测试数据

### test_budgets.sh
预算管理API综合测试脚本。

**功能**：
- 测试预算CRUD操作（创建、读取、更新、删除）
- 测试预算与分类的关联
- 测试预算周期（daily、weekly、monthly、yearly）
- 测试预算预警阈值边界值（0%-100%）
- 测试预算筛选功能（按周期、分类）

**使用方法**：
```bash
./scripts/test_budgets.sh
```

**测试内容**：
1. 登录验证
2. 创建测试分类
3. 创建月度预算
4. 创建周度预算
5. 获取所有预算
6. 按周期筛选（monthly）
7. 按分类筛选
8. 获取单个预算
9. 更新预算（修改金额和预警阈值）
10. 测试预警阈值边界值（0%和100%）
11. 删除预算
12. 验证删除后无法查询
13. 清理测试数据

**业务规则**：
- 一个分类只能有一个有效预算
- 预警阈值范围：0-100%
- 预算周期：daily、weekly、monthly、yearly

**要求**：
- 后端配置：运行在 8080 端口
- 测试账号：lance / 921217qL
- 工具依赖：curl, jq

## 注意事项

- 测试脚本不会自动重启后端，请确保后端已启动
- 测试数据使用 lance 账号，请确保该账号存在
- 测试完成后会自动清理测试数据
- 如需保留测试数据用于调试，请注释掉脚本最后的清理部分
